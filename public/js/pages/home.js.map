{"version":3,"sources":["home.jsx"],"names":[],"mappings":"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","file":"home.js","sourcesContent":["class HomeController extends ListController {\n    constructor() {\n        super();\n        this.wrapper = $(\"#homeController\");\n        this.homeScope = null;\n    }\n\n    init() {\n        super.init();\n        this.app.controller(\"homeController\", ($scope, $http) => {\n            $scope.channelOptions = {};\n            $scope.actionOptions = GLOB.options.actions;\n            $scope.action = \"leastAppear\";\n            $scope.withinTimes = 1;\n            $scope.channelId = 0;\n            $scope.configs = GLOB.configs;\n            $scope.headers = [];\n            $scope.contents = [];\n            $scope.isTwoNumber = 0;\n            $scope.searchRows = {};\n            $scope.maxTimes = 1;\n            $scope.selectedNumber = -1;\n\n            console.log($scope.configs);\n            // call ajax and get channel options\n            $http({\n                method: \"GET\",\n                url: \"home/getChannels\"\n            }).then((response) => {\n                var data = response.data;\n                $scope.channelOptions = data;\n                if (data.length > 0) {\n                    $scope.channelId = data[0].value;\n                    $scope.changeChannel();\n                }\n            }, (response) => {});\n\n            // when user change the channel\n            $scope.changeChannel = () => {\n                console.log(\"changeChannel\");\n                $scope.searchRows = {};\n                $http({\n                    method: \"POST\",\n                    url: \"home/getResults\",\n                    data: {channelId: $scope.channelId}\n                }).then((response) => {\n                    // format date time\n                    var headers = response.data.headers;\n\n                    for(var i = 0; i < headers.length; i++) {\n                        headers[i] = moment(headers[i], $scope.configs.databaseDateTimeFormat).valueOf();\n                    }\n\n                    $scope.contents = response.data.contents;\n                    $scope.headers = headers;\n\n                    $scope.maxTimes = headers.length;\n                    console.log($scope.headers);\n                }, (response) => {});\n            };\n\n            // when user click on Submit button\n            $scope.doAction = () => {\n                $http({\n                    method: \"POST\",\n                    url: \"home/doAction\",\n                    data: {\n                        channelId: $scope.channelId,\n                        action: $scope.action,\n                        withinTimes: $scope.withinTimes\n                    }\n                }).then((response) => {\n                    $scope.searchRows = response.data;\n                }, (response) => {});\n            }\n\n            // when uer click on result table\n            $scope.highlightNumber = (number) => {\n                $scope.selectedNumber = number;\n            }\n        });\n    }\n\n    angularReadyFunction() {\n        super.angularReadyFunction();\n        this.homeScope = angular.element(this.wrapper).scope();\n    }\n}\n\n(() => {\n    GLOB.controllers.home = new HomeController();\n    GLOB.controllers.home.init();\n})();\n\n// this function is fired when module and controller in angular init completed\nangular.element(document).ready(() => {\n    GLOB.controllers.home.angularReadyFunction();\n});"],"sourceRoot":"/source/"}